<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriGuard AI | Professional Advisory Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap');
        
        :root {
            --bg-main: #f8fafc;
            --surface: #ffffff;
            --text-main: #0f172a;
            --brand: #059669;
            --brand-hover: #047857;
            --border: #e2e8f0;
        }

        .dark {
            --bg-main: #020617;
            --surface: #0f172a;
            --text-main: #f1f5f9;
            --brand: #10b981;
            --brand-hover: #34d399;
            --border: #1e293b;
        }

        .theme-agrigold {
            --bg-main: #fefce8;
            --surface: #fffde7;
            --text-main: #422006;
            --brand: #b45309;
            --brand-hover: #92400e;
            --border: #fef08a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-panel {
            background-color: var(--surface);
            border: 1px solid var(--border);
            backdrop-filter: blur(8px);
        }

        .btn-interactive {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-interactive:active {
            transform: translateY(2px) scale(0.98);
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin-fast { animation: spin 0.8s linear infinite; }

        /* Custom Scrollbar for professional feel */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="antialiased">

    <nav class="glass-panel sticky top-0 z-40 px-6 py-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center space-x-3">
            <div class="bg-emerald-600 p-2 rounded-lg">
                <i class="fas fa-shield-halved text-white text-xl"></i>
            </div>
            <div>
                <span class="text-xl font-black tracking-tighter block leading-none">AgriGuard</span>
                <span class="text-[10px] uppercase tracking-widest opacity-60 font-bold text-emerald-600">Secure Advisory System</span>
            </div>
        </div>

        <div class="flex items-center space-x-1 bg-slate-100 dark:bg-slate-800 p-1 rounded-xl">
            <button onclick="setTheme('light')" class="p-2.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 transition-all" title="Light Mode">
                <i class="fas fa-sun text-amber-500"></i>
            </button>
            <button onclick="setTheme('dark')" class="p-2.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 transition-all" title="Dark Mode">
                <i class="fas fa-moon text-indigo-400"></i>
            </button>
            <button onclick="setTheme('agrigold')" class="p-2.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 transition-all" title="Agri-Gold Mode">
                <i class="fas fa-wheat-awn text-amber-700"></i>
            </button>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-6 py-10">
        <header class="mb-10">
            <h2 class="text-4xl font-black tracking-tighter mb-2">Operations Center</h2>
            <p class="opacity-60 font-medium">Analyze field conditions and deploy AI-driven crop solutions.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="space-y-4">
                <div class="glass-panel p-6 rounded-[2rem] border-l-4 border-emerald-500 shadow-xl">
                    <div class="flex items-center justify-between mb-5">
                        <div class="flex items-center space-x-3">
                            <div class="bg-emerald-100 dark:bg-emerald-900/30 p-2.5 rounded-2xl text-emerald-600">
                                <i class="fas fa-map-location-dot"></i>
                            </div>
                            <p class="text-[11px] font-black uppercase opacity-50 tracking-widest">Field Region</p>
                        </div>
                    </div>

                    <div id="location-ui-container" class="space-y-5">
                        <div id="location-display" class="bg-slate-50 dark:bg-slate-900/50 p-5 rounded-3xl border border-dashed border-slate-200 dark:border-slate-700 min-h-[80px] flex items-center">
                            <p class="text-sm font-bold opacity-40">System ready for sync...</p>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="detectLocation()" class="btn-interactive text-[10px] bg-emerald-600 text-white py-3.5 rounded-2xl font-black uppercase flex items-center justify-center space-x-2">
                                <i class="fas fa-satellite-dish"></i> <span>GPS Auto</span>
                            </button>
                            <button onclick="showManualInput()" class="btn-interactive text-[10px] bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 py-3.5 rounded-2xl font-black uppercase flex items-center justify-center space-x-2">
                                <i class="fas fa-keyboard"></i> <span>Manual</span>
                            </button>
                        </div>
                    </div>

                    <div id="manual-input-form" class="hidden space-y-3 mt-2 animate-in slide-in-from-top-2 duration-300">
                        <input type="text" id="manualCity" placeholder="City / Village" class="w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border-none ring-1 ring-slate-200 dark:ring-slate-800 outline-none text-sm focus:ring-2 focus:ring-emerald-500">
                        <input type="text" id="manualState" placeholder="State / Province" class="w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border-none ring-1 ring-slate-200 dark:ring-slate-800 outline-none text-sm focus:ring-2 focus:ring-emerald-500">
                        <div class="flex space-x-2 pt-2">
                            <button onclick="submitManualLocation()" class="flex-1 bg-emerald-600 text-white py-3 rounded-xl text-[10px] font-black uppercase">Confirm Entry</button>
                            <button onclick="cancelManual()" class="px-4 bg-slate-100 dark:bg-slate-800 rounded-xl text-slate-400 hover:text-red-500 transition-colors"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-5 rounded-3xl flex items-center justify-between btn-interactive cursor-pointer hover:border-emerald-500 transition-all" onclick="openModal('Market Analytics')">
                    <div class="flex items-center space-x-4">
                        <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-2xl text-blue-600"><i class="fas fa-chart-line"></i></div>
                        <div><p class="text-[10px] font-black uppercase opacity-40">Markets</p><p class="font-bold">Real-time Pricing</p></div>
                    </div>
                    <i class="fas fa-chevron-right text-xs opacity-20"></i>
                </div>
            </div>

            <div class="lg:col-span-2">
                <div class="glass-panel p-10 rounded-[2.5rem] shadow-2xl relative overflow-hidden border-t-8 border-emerald-600">
                    
                    <div id="form-container">
                        <h3 class="text-2xl font-black mb-8 flex items-center tracking-tight">
                            Technical Inquiry Portal
                        </h3>
                        <form id="agriForm" class="space-y-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div class="space-y-2">
                                    <label class="text-xs font-black uppercase opacity-40 tracking-widest ml-1">Crop Classification</label>
                                    <select class="w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border-none ring-1 ring-slate-200 dark:ring-slate-800 outline-none focus:ring-2 focus:ring-emerald-500 transition-all font-semibold">
                                        <option>Commercial Grains (Wheat/Corn)</option>
                                        <option>Horticulture (Fruits/Veg)</option>
                                        <option>Cash Crops (Cotton/Sugarcane)</option>
                                    </select>
                                </div>
                                <div class="space-y-2">
                                    <label class="text-xs font-black uppercase opacity-40 tracking-widest ml-1">Urgency Protocol</label>
                                    <select class="w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border-none ring-1 ring-slate-200 dark:ring-slate-800 outline-none focus:ring-2 focus:ring-emerald-500 transition-all font-semibold">
                                        <option>Level 01: Standard Advisory</option>
                                        <option>Level 02: High Risk (Pests)</option>
                                        <option>Level 03: Critical Outbreak</option>
                                    </select>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label class="text-xs font-black uppercase opacity-40 tracking-widest ml-1">Diagnostic Report</label>
                                <textarea class="w-full p-5 h-48 rounded-3xl bg-slate-50 dark:bg-slate-900 border-none ring-1 ring-slate-200 dark:ring-slate-800 outline-none focus:ring-2 focus:ring-emerald-500 transition-all font-medium" placeholder="Describe environmental anomalies, leaf discoloration, or growth patterns..."></textarea>
                            </div>

                            <button type="submit" class="btn-interactive w-full py-6 rounded-[1.5rem] text-white font-black uppercase tracking-[0.2em] text-xs shadow-2xl shadow-emerald-600/30" style="background: linear-gradient(135deg, var(--brand), var(--brand-hover))">
                                Transmit to AgriGuard Cloud
                            </button>
                        </form>
                    </div>

                    <div id="loading-ui" class="hidden py-24 text-center">
                        <div class="inline-block relative w-24 h-24 mb-8">
                            <div class="absolute inset-0 border-[6px] border-emerald-500/10 rounded-full"></div>
                            <div class="absolute inset-0 border-[6px] border-emerald-500 border-t-transparent rounded-full animate-spin-fast"></div>
                        </div>
                        <h4 class="text-2xl font-black tracking-tight">Analyzing Data Streams...</h4>
                        <p class="opacity-50 font-bold mt-2">Consulting global agronomy database</p>
                    </div>

                    <div id="success-ui" class="hidden py-16 text-center">
                        <div class="w-28 h-28 bg-emerald-500 text-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-emerald-500/50 rotate-6">
                            <i class="fas fa-check text-5xl"></i>
                        </div>
                        <h4 class="text-3xl font-black tracking-tight">Analysis Queued</h4>
                        <p class="opacity-60 font-medium max-w-xs mx-auto mt-4 leading-relaxed">Your technical report has been received by our AI agronomists.</p>
                        <button onclick="resetForm()" class="mt-10 text-[10px] font-black uppercase tracking-widest text-emerald-600 border-b-4 border-emerald-600 pb-1 hover:opacity-70 transition-opacity">Submit New Diagnostic</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="infoModal" class="fixed inset-0 bg-slate-950/90 backdrop-blur-xl z-50 hidden flex items-center justify-center p-6">
        <div class="glass-panel max-w-sm w-full rounded-[3rem] p-12 text-center shadow-2xl">
            <div class="w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-3xl flex items-center justify-center mx-auto mb-8">
                <i class="fas fa-lock text-3xl text-slate-400"></i>
            </div>
            <h3 id="modalTitle" class="text-2xl font-black mb-4">Module Encrypted</h3>
            <p class="text-sm font-medium opacity-50 mb-10 leading-relaxed">Access to this data stream is restricted to certified Agricultural Intelligence Officers.</p>
            <button onclick="closeModal()" class="w-full py-5 rounded-2xl bg-emerald-600 text-white font-black uppercase tracking-widest text-[10px] btn-interactive">Back to Dashboard</button>
        </div>
    </div>

    <script src='https://cdn.jotfor.ms/agent/embedjs/019c5775edbd7e0484da57184a07993d43b8/embed.js'></script>

    <script>
        const display = document.getElementById('location-display');
        const uiContainer = document.getElementById('location-ui-container');
        const manualForm = document.getElementById('manual-input-form');

        // Theme Engine
        function setTheme(theme) {
            document.documentElement.className = theme === 'dark' ? 'dark' : '';
            document.body.className = theme === 'theme-agrigold' ? 'theme-agrigold' : '';
        }

        // Location Management
        function showManualInput() {
            uiContainer.classList.add('hidden');
            manualForm.classList.remove('hidden');
        }

        function cancelManual() {
            manualForm.classList.add('hidden');
            uiContainer.classList.remove('hidden');
        }

        function submitManualLocation() {
            const city = document.getElementById('manualCity').value.trim();
            const state = document.getElementById('manualState').value.trim();
            
            if (city && state) {
                renderLocation(city, state, "Manual Profile Entry");
                cancelManual();
            } else {
                alert("Technical entry error: City and State fields required.");
            }
        }

        function renderLocation(city, state, source) {
            display.innerHTML = `
                <div class="space-y-1 animate-in fade-in slide-in-from-left-2">
                    <p class="text-[9px] uppercase font-black text-emerald-600 tracking-[0.2em] opacity-80">${source}</p>
                    <h4 class="text-xl font-black tracking-tighter">${city}</h4>
                    <p class="text-xs font-bold opacity-50">${state}</p>
                </div>
            `;
        }

        async function detectLocation() {
            display.innerHTML = '<div class="flex items-center space-x-3"><div class="w-4 h-4 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"></div><span class="text-xs font-black uppercase opacity-60">Pinging Satellites...</span></div>';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    try {
                        const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`);
                        const data = await res.json();
                        const city = data.address.city || data.address.town || data.address.village || "Regional Node";
                        const state = data.address.state || "Unspecified Province";
                        renderLocation(city, state, "GPS Verified Sync");
                    } catch (e) { display.innerHTML = "External Satellite Error."; }
                }, () => { display.innerHTML = "GPS Signal Denied."; });
            }
        }

        // Dashboard Navigation & Modals
        function openModal(title) {
            document.getElementById('modalTitle').innerText = title;
            const modal = document.getElementById('infoModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('infoModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // Form Submission Flow
        document.getElementById('agriForm').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('loading-ui').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('loading-ui').classList.add('hidden');
                document.getElementById('success-ui').classList.remove('hidden');
            }, 2500);
        });

        function resetForm() {
            document.getElementById('success-ui').classList.add('hidden');
            document.getElementById('form-container').classList.remove('hidden');
            document.getElementById('agriForm').reset();
        }
    </script>
</body>
</html>